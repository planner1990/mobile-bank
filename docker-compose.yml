version: "3.8"
services:
  mobilebank-panel-client:
    image: $repository/docker/mehr/mobilebank/$CONTAINER_NAME:TestStage
    container_name: $CONTAINER_NAME
    hostname: $CONTAINER_NAME
    deploy:
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
    labels:
      - "collect_logs_with_filebeat=true"
      - "decode_log_event_to_json_object=true"
    networks:
      - loan-net
    ports:
      - 8003:8003
    environment:
      - EUREKA_SERVER=http://discovery:8761/myeureka/eureka
      - TZ=Asia/Tehran
    env_file:
      - .env

networks:
  loan-net:
    name: loan-net
    external: true
